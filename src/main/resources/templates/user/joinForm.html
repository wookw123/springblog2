<div th:insert="/common/header :: header"></div>


<div class="container" th:if = "${session.authinfo == null}">
    <form th:action ="@{/auth/userJoin}" method = "post" onsubmit="return duplicationcheck()">
        <div class="form-group">
            <label for="username">Username:</label> <label for="username"> </label>
            <input type="text" 	class="form-control" placeholder="Enter username" id="username" name = "username" >
            <button type = "button" class="btn btn-info" onclick="idcheck()"> 중복확인 </button>
        </div>
        <div class="form-group">
            <label for="password">password:</label> <input type="password"	class="form-control" placeholder="Enter password" id="password" name = "password">
        </div>
        <div class="form-group">
            <label for="email">Email address:</label> <input type="email" class="form-control" placeholder=	"Enter email" id="email" name = "email">
        </div>
        <div class="form-group">
            <label for="Phone">phone:</label> <input type="tel" class="form-control" placeholder=	"Enter Phone number" id="phone" name = "phone">
        </div>
        <div class="form-group">
            <label for="address">address:</label> <input type="text" class="form-control" placeholder=	"Enter address" id="address" name = "address">
        </div>
        <div class="form-group form-check">
            <label class="form-check-label"> <input
                    class="form-check-input" type="checkbox"> Remember me
            </label>
        </div>
        <button type="submit" class="btn btn-primary">회원가입하기</button>
    </form>
</div>

<script>

    var checked = false;

    <!--아이디 중복체크-->
    function idcheck(){
        var username = $("#username").val();

        $.ajax({
            type : "POST",
            url : "/auth/joincheck",
            data : username,
            contentType:"text/plain; charset=utf-8",
            dataType:"text"

        }).done(function(data){
            if(data === "ok"){
                alert("이미 존재하는 아이디 입니다");
                checked = false;
            }else{
                alert("사용할 수 있는 아이디 입니다");
                checked = true;
            }
        });
    }

    <!--중복체크를 했는지 확인-->
    function duplicationcheck(){
        if(checked === false){
        alert("아이디 중복체크를 하세요")
        }
        return checked;
    }



</script>

<div th:insert="/common/footer :: footer"></div>